Turbo Assembler	 Version 4.1	    03/02/20 13:58:23	    Page 1
lab5.ASM



      1				     ;*	–°–û–ó–î–ê–ù–ò–ï –°–ï–ì–ú–ï–ù–¢–ê –°–¢–≠–ö–ê *
      2	0000			     STACKSEG SEGMENT PARA STACK "STACK"
      3	0000  20*(0000)				  DW	  32   DUP(0)
      4	0040			     STACKSEG ENDS
      5				     ;*	–°–û–ó–î–ê–ù–ò–ï –°–ï–ì–ú–ï–ù–¢–ê –î–ê–ù–ù–´–• *
      6	0000			     DSEG SEGMENT PARA PUBLIC "DATA"
      7	0000  0000			     NUM       DW 0
      8	0002  00			     FL	   DB 0				       ; –§–õ–ê–ì –ù–ï–ì–ê–¢–ò–í–ù–û–ì–û	    +
      9				     (1)/–ü–û–ó–ò–¢–ò–í–ù–û–ì–û(0) –ß–ò–°–õ–ê
     10	0003  05 ?? 04*(3F)		     DUMP  DB 5, ?, 4 DUP('?') ; –°–¢–†–£–ö–¢–ö–†–ê –î–ê–ù–ù–´–• –î–õ–Ø	–•–†–ê–ù–ï–ù–ò–Ø    +
     11				     –í–í–û–î–ê
     12	0009  00			     ERRCD DB 0				       ; –§–õ–ê–ì –û–®–ò–ë–ö–ò
     13											       ; 0 - –û–®–ò–ë–û–ö –ù–ï–¢
     14											       ; 1 - –û–®–ò–ë–ö–ê
     15	000A  2A 45 52 52 4F 52	2A	     ERRTXT  DB	'*ERROR*'
     16	0011  20 2D 20 59 4F 55	20+			     DB	' - YOU	NEED TO	ENTER THE NUMBER$'
     17	      4E 45 45 44 20 54	4F+
     18	      20 45 4E 54 45 52	20+
     19	      54 48 45 20 4E 55	4D+
     20	      42 45 52 24
     21	0031  45 4E 54 45 52 20	59+	     MSGTXT  DB	'ENTER YOU NUMBER:$'
     22	      4F 55 20 4E 55 4D	42+
     23	      45 52 3A 24
     24	0043  41 4E 53 57 45 52	3A+	     MSG2TXT DB	'ANSWER:  $'
     25	      20 20 24
     26	004D			     DSEG ENDS
     27				     ;--------------------------------------------------------------------------
     28				     INCLUDE MACRO.ASM
1    29				     ;‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
1    30				     ;‚îÇ –ú–∞–∫—Ä–æ—Å magic ‚îÇ
1    31				     ;‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
1    32				     MAGIC   MACRO   DSEG
1    33					     PUSH    DS
1    34					     MOV	     AX,0
1    35					     PUSH    AX
1    36					     MOV	     AX,DSEG
1    37					     MOV	     DS,AX
1    38				     ENDM
1    39
1    40				     ;‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î
     41				     Ä‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
1    42				     ;‚îÇ –ú–∞–∫—Ä–æ—Å –≤—ã–≤–æ–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω —Å—Ç—Ä–æ–∫–∏ stirng	‚îÇ
1    43				     ;‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î
     44				     Ä‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
1    45				     PRINTF  MACRO   STRING
1    46					     MOV     AH,9		     ; –§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏
1    47					     LEA     DX,STRING		     ; –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–¥—Ä–µ—Å —Å—Ç—Ä–æ–∫–∏
1    48					     INT     21H		     ; –í—ã–∑–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è DOS
1    49					     MOV AL,0AH
1    50					     INT     29H
1    51				     ENDM
1    52
1    53				     NEWLINE MACRO
1    54					     MOV     AL,0AH
1    55					     INT 29H
1    56					     MOV     AL,0DH
1    57					     INT 29H
Turbo Assembler	 Version 4.1	    03/02/20 13:58:23	    Page 2
lab5.ASM



1    58				     ENDM
1    59
1    60				     ;‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î
     61				     Ä‚îÄ‚îÄ‚îê
1    62				     ;‚îÇ –ú–∞–∫—Ä–æ—Å –í–í–û–î–ê –ß–ò–°–õ–ê –í	–ü–ï–†–ï–ú–ï–ù–ù–£–Æ ‚îÇ
1    63				     ;‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î
     64				     Ä‚îÄ‚îÄ‚îò
1    65				     INPUT   MACRO   DUMP,ERRCD,NUM,FL
1    66					     MOV ERRCD,0	     ; –û–ë–ù–£–õ–ï–ù–ò–ï –ö–û–î–ê –û–®–ò–ë–ö–ò
1    67					;* –í–í–û–î –î–ê–ù–ù–´–• –° –ö–õ–ê–í–ò–¢–£–†–´ *
1    68					     LEA      DX,DUMP	     ; –†–ê–ó–ú–ï–©–ï–ù–ò–ï –í 'DX' –°–¢–†–£–ö–¢–£–†–´ 'DUMP'
1    69					     MOV      AH,10	     ; –ö–û–î '10' –ü–†–ï–†–´–í–ù–ò–Ø 21..
1    70					     INT      21H	     ; ..–û–¢–í–ï–ß–ê–ï–¢ –ó–ê –í–í–û–î	–î–ê–ù–ù–´–• –°		    +
     71				     –ö–õ–ê–í–ò–ê–¢–£–†–´
1    72					;* –í–í–ï–î–ï–ù–ù–´–ï –î–ê–ù–ù–´–ï –° –ö–õ–ê–í–ò–ê–¢–£–†–´ –ü–û–ú–ï–©–ï–ù–ù–´ –í 'DUMP'(DUMP+
     73				     +2)
1    74					;* –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ö–û–õ-–í–ê –í–í–ï–î–ï–ù–´–• –°–ò–ú–û–í–õ–û–í
1    75					     LEA      SI,DUMP+1	     ; –†–ê–ó–ú–ï–©–ï–ù–ò–ï –í 'SI' –ê–î–†–ï–°–ê –° –ö–û–õ-–í–û–ú   +
     76				     –í–í–ï–î–ï–ù–´–• –ó–ù–ê–ö–û–í
1    77					     XOR      CX,CX	     ; –û–ë–ù–£–õ–ï–ù–ò–ï –°–ß–ï–¢–ß–ò–ö–ê
1    78					     MOV      CL,[SI]	     ; "–£–°–¢–ê–ù–û–í–ö–ê" –°–ß–ï–¢–ß–ò–ö–ê
1    79					     CMP      CX,0	     ; *–ï–°–õ–ò –ù–ò–ß–ï–ì–û –ù–ï –í–í–ï–î–ï–ù–û
1    80					     JE		     SOME_ERR	 ; –í–´–í–ï–°–¢–ò –ö–û–î –û–®–ò–ë–ö–ò
1    81					;* –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ü–û–ó–ò–¢–ò–í–ù–û–°–¢–ò –ß–ò–°–õ–ê
1    82					     ; MOV    FL,0	     ; –î–õ–Ø –°–ë–†–û–°–ê –§–õ–ê–ì–ê –ü–û–ó/–ù–ï–ì –ß–ò–°–õ–ê
1    83					     INC      SI		     ; *–ü–ï–†–ï–•–û–î –° –ö–û–õ-–í–ê –í–í–ï–î–ï–ù–´–•	    +
     84				     –°–ò–ú–í–û–õ–û–í
1    85										     ;	–ù–ê –ü–ï–†–í–´–ô –í–í–ï–î–ï–ù–ù–´–ô	    +
     86				     –°–ò–ú–í–û–õ.
1    87					     MOV      AL,[SI]	     ;	–†–ê–ó–ú–ï–©–ï–ù–ò–ï –ï–ì–û –í –†–ï–ì–ò–°–¢–† –î–õ–Ø	    +
     88				     –û–ë–†–ê–ë–û–¢–ö–ò.
1    89					     CMP      AL,'-'	     ;	–ü–†–û–í–ï–†–ö–ê –ú–ò–ù–£–° –õ–ò –≠–¢–û.
1    90					     JNE     NO_MINUS	     ;	–ï–°–õ–ò –ú–ò–ù–£–°–ê –ù–ï–¢ - –ü–ï–†–ï–•–û–î*
1    91					     MOV	      FL,1	     ; –£–°–¢–ê–ù–û–ö–ê	–§–õ–ê–ì–ê –ù–ï–ì–ê–¢–ò–í–ù–û–ì–û   +
     92				     –ß–ò–°–õ–ê
1    93					     DEC      CL		     ; –£–ß–ï–°–¢–¨ –ú–ò–ù–£–° –í –ö–û–õ-–í–ï		    +
     94				     –í–í–ï–î–ï–ù–ù–´–•	–°–ò–ú–í–û–õ–û–í
1    95					     CMP      CX,0	     ; *–ï–°–õ–ò –ö–†–û–ú–ï –ú–ò–ù–£–°–ê –ù–ò–ß–ï–ì–û –ù–ï	    +
     96				     –í–í–ï–î–ï–ù–û
1    97					     JE		     SOME_ERR	     ;	–í–´–ô–¢–ò –ò–ó	–ü–†–û–ì–†–ê–ú–ú–´*
1    98					     INC      SI		     ; –ü–ï–†–ï–ô–¢–ò –ö –°–õ–ï–î–£–Æ–©–ï–ú–£ –†–ê–ó–†–Ø–î–£+
     99				     –ß–ò–°–õ–ê
1   100					NO_MINUS:		     ;*	–ù–ê–ß–ê–õ–û –†–ê–ë–û–¢–´ –° –ß–ò–°–õ–û–ú
1   101					     XOR      AX,AX	     ; –û–ß–ò–°–¢–ö–ê 'AX'
1   102					     XOR      DI,DI	     ; –û–ß–ò–°–¢–ö–ê 'DI'
1   103					     MOV      DI,10	     ; –î–õ–Ø –†–ê–ó–î–ï–õ–ï–ù–ò–Ø –ß–ò–°–õ–ê –ù–ê –†–ê–ó–†–Ø–î–´
1   104					     DEC      SI		     ; –í–û–ó–í–†–ê–©–ê–ï–ú–°–Ø	–ö –†–ê–ë–û–ß–ï–ú–£	    +
    105				     –°–ò–ú–í–û–õ–£
1   106					FOR_LOOP:		     ; –ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê –ü–†–û–•–û–î–ê –ü–û –ß–ò–°–õ–£	    +
    107				     (–ü–û–†–ê–ó–†–Ø–î–ù–û)
1   108					     INC      SI		     ; –ü–ï–†–ï–•–û–î –ö –ü–ï–†–í–û–ú–£	–°–ò–ú–í–û–õ–£
1   109					     XOR      BX,BX	     ; –û–ë–ù–£–õ–ï–ù–ò–ï 'BX'
1   110					     MOV      BL,[SI]	     ; –†–ê–ó–ú–ï–©–ï–ù–ò–ï –ß–ò–°–õ–ê –í –†–ï–ì–ò–°–¢–†
1   111					     SUB      BL,'0'	     ; –ü–†–ï–û–ë–†–ê–ó–û–í–ê–ù–ò–ï ASCII TO DEC
1   112					     CMP      BL,9	     ; *–ï–°–õ–ò –í–í–ï–î–ï–ù–ê	–ù–ï –¶–ò–§–†–ê
1   113					     JA		     SOME_ERR	     ;	–í–´–ô–¢–ò –ò–ó	–ü–†–û–ì–†–ê–ú–ú–´*
1   114					     MUL      DI		     ; *–£–ú–ù–û–ñ–ê–ï–ú 'AX' –ù–ê 10 –î–õ–Ø		    +
Turbo Assembler	 Version 4.1	    03/02/20 13:58:23	    Page 3
lab5.ASM



    115				     –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ú–ï–°–¢–ê
1   116										     ;	–ü–û–î –ù–û–í–´–ô –°–ò–ú–í–û–õ*	(1 -> 10 +  +
    117				     'BX' = 11)
1   118					     ADD      AX,BX	     ;	–ü–†–ò–ë–ê–í–õ–Ø–ï–ú –ö	–ß–ò–°–õ–£ –í 'AX'		    +
    119				     –ü–û–õ–£–ß–ï–ù–ù–£–Æ –¶–ò–§–†–£
1   120					LOOP	     FOR_LOOP	 ; "–ö–û–ù–ï–¶"	–¶–ò–ö–õ–ê –ü–†–û–•–û–î–ê –ü–û –ß–ò–°–õ–£
1   121					     CMP      FL,1	     ; *–ï–°–õ–ò –ß–ò–°–õ–û –ù–ï –û–¢–†–ò–¶–ê–¢–ï–õ–¨–ù–û–ï
1   122					     JNE     NOT_NEG	     ;	–ù–ò–ß–ï–ì–û –ù–ï –î–ï–õ–ê–ï–ú.
1   123					     NEG      AX		     ;	–ò–ù–ß–ï - –î–ï–õ–ê–ï–ú	–ï–ì–û –ù–ï–ì–ê–¢–ò–í–ù–´–ú.
1   124					NOT_NEG:
1   125					 CMP	      ERRCD,0	   ; *–ï–°–õ–ò –û–®–ò–ë–û–ö –ù–ï–¢
1   126					 JE	      EXIT	     ;	–ù–ê –í–´–•–û–î	–ò–ó –ü–†–û–¶–ï–î–£–†–´*
1   127
1   128					SOME_ERR:
1   129					 MOV	      ERRCD,1		 ; –ü–û–î–ù–Ø–¢–¨ –§–õ–ê–ì –û–®–ò–ë–ö–ò	- 1
1   130
1   131					EXIT:
1   132					 MOV	      NUM,AX
1   133				     ENDM
1   134
1   135				     ;‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î
    136				     Ä‚îÄ‚îÄ‚îê
1   137				     ;‚îÇ –ú–∞–∫—Ä–æ—Å –í–´–í–û–î–ê –ß–ò–°–õ–ê –ù–ê –≠–ö–†–ê–ù	  ‚îÇ
1   138				     ;‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î
    139				     Ä‚îÄ‚îÄ‚îò
1   140				     OUTPUT  MACRO   NUM
1   141					     MOV      BX,NUM	     ; –†–ê–ó–ú–ï–©–ï–ù–ò–ï –ß–ò–°–õ–ê –í –†–ï–ì–ò–°–¢–†–ï BX
1   142					     OR		      BX,BX	     ; *–ï–°–õ–ò –ß–ò–õ–û –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–û–ï
1   143					     JNS	     M1			     ;	–ü–ï–†–ï–ô–¢–ò –í M1.
1   144					     MOV      AL,"-"	     ;	–ò–ù–ß–ï –†–ê–ó–ú–ï–°–¢–ò–¢ –í –†–ï–ó–£–õ–¨–¢–ê–¢–ï	    +
    145				     –°–ò–ú–í–û–õ –ú–ò–ù–£–°–ê.
1   146					     INT      29H	     ;	–í–´–í–ï–°–¢–ò –ú–ò–ù–£–° –ù–ê –≠–ö–†–ê–ù*
1   147					     NEG      BX		     ; –ò–ó–ú–ï–ù–ò–¢–¨	–°–¢–ê–†–®–ò–ô –ë–ò–¢ –ß–ò–°–õ–ê    +
    148				     ("–£–ë–†–ê–¢–¨ –ú–ò–ù–£–°")
1   149					M1:				     ; –¢–û–ß–ö–ê –ü–†–ï–•–û–î–ê –ï–°–õ–ò –ß–ò–°–õ–û	    +
    150				     –ü–û–ó–ò–¢–ò–í–ù–û–ï
1   151					     MOV      AX,BX	     ; –û–ë–ù–û–í–ò–¢–¨	–ß–ò–°–õ–û –í –†–ï–ì–ò–°–¢–†–ï 'AX'	    +
    152				     (–ò–ó-–ó–ê	"NEG BX")
1   153					     XOR      CX,CX	     ; –û–ë–ù–£–õ–ò–¢–¨	–†–ï–ì–ò–°–¢–† –°–ß–ï–¢–ß–ò–ö–ê
1   154					     MOV      BX,10	     ; –î–õ–Ø –†–ê–ó–î–ï–õ–ï–ù–ò–Ø –ß–ò–°–õ–ê –ù–ê –†–ê–ó–†–Ø–î–´
1   155					M2:				     ; –ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê "–†–ê–ó–ú–ï–©–ï–ù–ò–ï	    +
    156				     –ß–ò–°–õ–ê	–í –°–¢–ï–ö–ï"
1   157					     XOR      DX,DX	     ; –û–ë–ù–£–õ–ï–ù–ò–ï 'DX'
1   158					     DIV      BX		     ; –î–ï–õ–ï–ù–ò–ï 'AX' –ù–ê	'BX'(–û–¢–î–ï–õ–ï–ù–ò–ï	    +
    159				     –†–ê–ó–†–Ø–î–ê)
1   160					     ADD      DL,"0"	     ; DECIMAL TO ASCII
1   161					     PUSH     DX		     ; –†–ê–ó–ú–ï–©–ï–ù–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–ê –í	    +
    162				     –°–¢–ï–ö–ï
1   163					     INC      CX		     ; –£–í–ï–õ–ò–ß–ï–ù–ò–ï –°–ß–ï–¢–ß–ò–ö–ê
1   164					     TEST     AX,AX	     ; *–ï–°–õ–ò –ï–©–ï	–û–°–¢–ê–õ–ò–°–¨ –¶–ò–§–†–´ –í –ß–ò–°–õ–ï
1   165					     JNZ      M2		     ;	–ü–û–í–¢–û–†–ò–¢–¨ "–†–ê–ó–ú–ï–©–ï–ù–ò–ï –í	    +
    166				     –°–¢–ï–ö–ï"
1   167					M3:				     ; –ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê –í–´–í–û–î–ê –ß–ò–°–õ–ê –ò–ó +
    168				     –°–¢–ï–ö –ù–ê –≠–ö–†–ê–ù
1   169					     POP      AX		     ; –î–û–°–¢–ê–¢–¨ –í–ï–†–•–ù–Æ–Æ –¶–ò–§–†–£	–ò–ó	    +
    170				     –°–¢–≠–ö–ê
1   171					     INT      29H	     ; –í–´–í–ï–°–¢–ò –ï–Å –ù–ê	–≠–ö–†–ê–ù
Turbo Assembler	 Version 4.1	    03/02/20 13:58:23	    Page 4
lab5.ASM



1   172					LOOP	     M3			     ; –ü–û–í–¢–û–†–ò–¢–¨ 'M3' –ü–û–ö–ê	–°–ß–ï–¢–ß–ò–ö –ù–ï +
    173				     '0'
1   174				     ENDM
1   175
1   176				     ;‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
1   177				     ;‚îÇ –ú–∞–∫—Ä–æ—Å –°–õ–û–ñ–ï–ù–ò–Ø	‚îÇ
1   178				     ;‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
1   179				     ADDITION	     MACRO   NUM1,NUM2
1   180					     MOV     AX,NUM1
1   181					     MOV     BX,NUM2
1   182					     ADD AX, BX
1   183					     MOV     NUM1,AX
1   184				     ENDM
    185				     ;--------------------------------------------------------------------------
    186				     ;*	–°–û–ó–î–ê–ù–ò–ï –°–ï–ì–ú–ï–ù–¢–ê –ö–û–î–ê *
    187	0000			     CSEG     SEGMENT PARA PUBLIC "CODE"
    188				     ;*	–ù–ê–ß–ê–õ–û –û–°–ù–û–í–ù–û–ô –ü–†–û–¶–ï–î–£–†–´
    189	0000			      MAIN    PROC    FAR
    190					      ASSUME  CS: CSEG,	DS: DSEG, SS: STACKSEG
    191					 MAGIC		     DSEG
1   192	0000  1E			     PUSH    DS
1   193	0001  B8 0000			     MOV	     AX,0
1   194	0004  50			     PUSH    AX
1   195	0005  B8 0000s			     MOV	     AX,DSEG
1   196	0008  8E D8			     MOV	     DS,AX
    197
    198					     PRINTF	     MSGTXT  ; –ü–û–ü–†–û–°–ò–¢–¨ –í–í–ï–°–¢–ò –ß–ò–°–õ–û
1   199	000A  B4 09			     MOV     AH,9		     ; –§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏
1   200	000C  BA 0031r			     LEA     DX,MSGTXT		     ; –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–¥—Ä–µ—Å —Å—Ç—Ä–æ–∫–∏
1   201	000F  CD 21			     INT     21H		     ; –í—ã–∑–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è DOS
1   202	0011  B0 0A			     MOV AL,0AH
1   203	0013  CD 29			     INT     29H
    204
    205					     INPUT	     DUMP,ERRCD,NUM,FL
1   206	0015  C6 06 0009r 00		     MOV ERRCD,0	     ; –û–ë–ù–£–õ–ï–ù–ò–ï –ö–û–î–ê –û–®–ò–ë–ö–ò
1   207	001A  BA 0003r			     LEA      DX,DUMP	     ; –†–ê–ó–ú–ï–©–ï–ù–ò–ï –í 'DX' –°–¢–†–£–ö–¢–£–†–´ 'DUMP'
1   208	001D  B4 0A			     MOV      AH,10	     ; –ö–û–î '10' –ü–†–ï–†–´–í–ù–ò–Ø 21..
1   209	001F  CD 21			     INT      21H	     ; ..–û–¢–í–ï–ß–ê–ï–¢ –ó–ê –í–í–û–î	–î–ê–ù–ù–´–• –°		    +
    210				     –ö–õ–ê–í–ò–ê–¢–£–†–´
1   211	0021  BE 0004r			     LEA      SI,DUMP+1	     ; –†–ê–ó–ú–ï–©–ï–ù–ò–ï –í 'SI' –ê–î–†–ï–°–ê –° –ö–û–õ-–í–û–ú   +
    212				     –í–í–ï–î–ï–ù–´–• –ó–ù–ê–ö–û–í
1   213	0024  33 C9			     XOR      CX,CX	     ; –û–ë–ù–£–õ–ï–ù–ò–ï –°–ß–ï–¢–ß–ò–ö–ê
1   214	0026  8A 0C			     MOV      CL,[SI]	     ; "–£–°–¢–ê–ù–û–í–ö–ê" –°–ß–ï–¢–ß–ò–ö–ê
1   215	0028  83 F9 00			     CMP      CX,0	     ; *–ï–°–õ–ò –ù–ò–ß–ï–ì–û –ù–ï –í–í–ï–î–ï–ù–û
1   216	002B  74 3F			     JE		     SOME_ERR	 ; –í–´–í–ï–°–¢–ò –ö–û–î –û–®–ò–ë–ö–ò
1   217	002D  46			     INC      SI		     ; *–ü–ï–†–ï–•–û–î –° –ö–û–õ-–í–ê –í–í–ï–î–ï–ù–´–•	    +
    218				     –°–ò–ú–í–û–õ–û–í
1   219	002E  8A 04			     MOV      AL,[SI]	     ;	–†–ê–ó–ú–ï–©–ï–ù–ò–ï –ï–ì–û –í –†–ï–ì–ò–°–¢–† –î–õ–Ø	    +
    220				     –û–ë–†–ê–ë–û–¢–ö–ò.
1   221	0030  3C 2D			     CMP      AL,'-'	     ;	–ü–†–û–í–ï–†–ö–ê –ú–ò–ù–£–° –õ–ò –≠–¢–û.
1   222	0032  75 0D			     JNE     NO_MINUS	     ;	–ï–°–õ–ò –ú–ò–ù–£–°–ê –ù–ï–¢ - –ü–ï–†–ï–•–û–î*
1   223	0034  C6 06 0002r 01		     MOV	      FL,1	     ; –£–°–¢–ê–ù–û–ö–ê	–§–õ–ê–ì–ê –ù–ï–ì–ê–¢–ò–í–ù–û–ì–û   +
    224				     –ß–ò–°–õ–ê
1   225	0039  FE C9			     DEC      CL		     ; –£–ß–ï–°–¢–¨ –ú–ò–ù–£–° –í –ö–û–õ-–í–ï		    +
    226				     –í–í–ï–î–ï–ù–ù–´–•	–°–ò–ú–í–û–õ–û–í
1   227	003B  83 F9 00			     CMP      CX,0	     ; *–ï–°–õ–ò –ö–†–û–ú–ï –ú–ò–ù–£–°–ê –ù–ò–ß–ï–ì–û –ù–ï	    +
    228				     –í–í–ï–î–ï–ù–û
Turbo Assembler	 Version 4.1	    03/02/20 13:58:23	    Page 5
lab5.ASM



1   229	003E  74 2C			     JE		     SOME_ERR	     ;	–í–´–ô–¢–ò –ò–ó	–ü–†–û–ì–†–ê–ú–ú–´*
1   230	0040  46			     INC      SI		     ; –ü–ï–†–ï–ô–¢–ò –ö –°–õ–ï–î–£–Æ–©–ï–ú–£ –†–ê–ó–†–Ø–î–£+
    231				     –ß–ò–°–õ–ê
1   232	0041				NO_MINUS:		     ;*	–ù–ê–ß–ê–õ–û –†–ê–ë–û–¢–´ –° –ß–ò–°–õ–û–ú
1   233	0041  33 C0			     XOR      AX,AX	     ; –û–ß–ò–°–¢–ö–ê 'AX'
1   234	0043  33 FF			     XOR      DI,DI	     ; –û–ß–ò–°–¢–ö–ê 'DI'
1   235	0045  BF 000A			     MOV      DI,10	     ; –î–õ–Ø –†–ê–ó–î–ï–õ–ï–ù–ò–Ø –ß–ò–°–õ–ê –ù–ê –†–ê–ó–†–Ø–î–´
1   236	0048  4E			     DEC      SI		     ; –í–û–ó–í–†–ê–©–ê–ï–ú–°–Ø	–ö –†–ê–ë–û–ß–ï–ú–£	    +
    237				     –°–ò–ú–í–û–õ–£
1   238	0049				FOR_LOOP:		     ; –ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê –ü–†–û–•–û–î–ê –ü–û –ß–ò–°–õ–£	    +
    239				     (–ü–û–†–ê–ó–†–Ø–î–ù–û)
1   240	0049  46			     INC      SI		     ; –ü–ï–†–ï–•–û–î –ö –ü–ï–†–í–û–ú–£	–°–ò–ú–í–û–õ–£
1   241	004A  33 DB			     XOR      BX,BX	     ; –û–ë–ù–£–õ–ï–ù–ò–ï 'BX'
1   242	004C  8A 1C			     MOV      BL,[SI]	     ; –†–ê–ó–ú–ï–©–ï–ù–ò–ï –ß–ò–°–õ–ê –í –†–ï–ì–ò–°–¢–†
1   243	004E  80 EB 30			     SUB      BL,'0'	     ; –ü–†–ï–û–ë–†–ê–ó–û–í–ê–ù–ò–ï ASCII TO DEC
1   244	0051  80 FB 09			     CMP      BL,9	     ; *–ï–°–õ–ò –í–í–ï–î–ï–ù–ê	–ù–ï –¶–ò–§–†–ê
1   245	0054  77 16			     JA		     SOME_ERR	     ;	–í–´–ô–¢–ò –ò–ó	–ü–†–û–ì–†–ê–ú–ú–´*
1   246	0056  F7 E7			     MUL      DI		     ; *–£–ú–ù–û–ñ–ê–ï–ú 'AX' –ù–ê 10 –î–õ–Ø		    +
    247				     –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ú–ï–°–¢–ê
1   248	0058  03 C3			     ADD      AX,BX	     ;	–ü–†–ò–ë–ê–í–õ–Ø–ï–ú –ö	–ß–ò–°–õ–£ –í 'AX'		    +
    249				     –ü–û–õ–£–ß–ï–ù–ù–£–Æ –¶–ò–§–†–£
1   250	005A  E2 ED			LOOP	     FOR_LOOP	 ; "–ö–û–ù–ï–¶"	–¶–ò–ö–õ–ê –ü–†–û–•–û–î–ê –ü–û –ß–ò–°–õ–£
1   251	005C  80 3E 0002r 01		     CMP      FL,1	     ; *–ï–°–õ–ò –ß–ò–°–õ–û –ù–ï –û–¢–†–ò–¶–ê–¢–ï–õ–¨–ù–û–ï
1   252	0061  75 02			     JNE     NOT_NEG	     ;	–ù–ò–ß–ï–ì–û –ù–ï –î–ï–õ–ê–ï–ú.
1   253	0063  F7 D8			     NEG      AX		     ;	–ò–ù–ß–ï - –î–ï–õ–ê–ï–ú	–ï–ì–û –ù–ï–ì–ê–¢–ò–í–ù–´–ú.
1   254	0065				NOT_NEG:
1   255	0065  80 3E 0009r 00		 CMP	      ERRCD,0	   ; *–ï–°–õ–ò –û–®–ò–ë–û–ö –ù–ï–¢
1   256	006A  74 05			 JE	      EXIT	     ;	–ù–ê –í–´–•–û–î	–ò–ó –ü–†–û–¶–ï–î–£–†–´*
1   257	006C				SOME_ERR:
1   258	006C  C6 06 0009r 01		 MOV	      ERRCD,1		 ; –ü–û–î–ù–Ø–¢–¨ –§–õ–ê–ì –û–®–ò–ë–ö–ò	- 1
1   259	0071				EXIT:
1   260	0071  A3 0000r			 MOV	      NUM,AX
    261					     NEWLINE
1   262	0074  B0 0A			     MOV     AL,0AH
1   263	0076  CD 29			     INT 29H
1   264	0078  B0 0D			     MOV     AL,0DH
1   265	007A  CD 29			     INT 29H
    266
    267	007C  80 3E 0009r 01		     CMP		     ERRCD,1	     ;–ü–†–û–í–ï–†–ò–¢–¨ –û–®–ò–ë–ö–ò –í–í–û–î–ê
    268	0081  75 10			     JNE		NO_ERRORS    ;–ï–°–õ–ò –û–®–ò–ë–û–ö –ù–ï–¢ -
    269					     PRINTF	     ERRTXT	     ;–ò–ù–ß–ï –í–´–í–ï–°–¢–ò –°–û–û–ë–©–ï–ù–ò–ï –û–ë	    +
    270				     –û–®–ò–ë–ö–ï
1   271	0083  B4 09			     MOV     AH,9		     ; –§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏
1   272	0085  BA 000Ar			     LEA     DX,ERRTXT		     ; –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–¥—Ä–µ—Å —Å—Ç—Ä–æ–∫–∏
1   273	0088  CD 21			     INT     21H		     ; –í—ã–∑–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è DOS
1   274	008A  B0 0A			     MOV AL,0AH
1   275	008C  CD 29			     INT     29H
    276	008E  B8 4C00			     MOV		     AX,4C00H
    277	0091  CD 21			     INT		     21H
    278	0093				NO_ERRORS:			     ;–ü–†–û–ü–£–°–¢–ò–¢–¨
    279
    280					     ADDITION	     NUM,12
1   281	0093  A1 0000r			     MOV     AX,NUM
1   282	0096  BB 000C			     MOV     BX,12
1   283	0099  03 C3			     ADD AX, BX
1   284	009B  A3 0000r			     MOV     NUM,AX
    285
Turbo Assembler	 Version 4.1	    03/02/20 13:58:23	    Page 6
lab5.ASM



    286					     PRINTF	     MSG2TXT
1   287	009E  B4 09			     MOV     AH,9		     ; –§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏
1   288	00A0  BA 0043r			     LEA     DX,MSG2TXT		     ; –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–¥—Ä–µ—Å —Å—Ç—Ä–æ–∫–∏
1   289	00A3  CD 21			     INT     21H		     ; –í—ã–∑–æ–≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è DOS
1   290	00A5  B0 0A			     MOV AL,0AH
1   291	00A7  CD 29			     INT     29H
    292					     OUTPUT	     NUM
1   293	00A9  8B 1E 0000r		     MOV      BX,NUM	     ; –†–ê–ó–ú–ï–©–ï–ù–ò–ï –ß–ò–°–õ–ê –í –†–ï–ì–ò–°–¢–†–ï BX
1   294	00AD  0B DB			     OR		      BX,BX	     ; *–ï–°–õ–ò –ß–ò–õ–û –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–û–ï
1   295	00AF  79 06			     JNS	     M1			     ;	–ü–ï–†–ï–ô–¢–ò –í M1.
1   296	00B1  B0 2D			     MOV      AL,"-"	     ;	–ò–ù–ß–ï –†–ê–ó–ú–ï–°–¢–ò–¢ –í –†–ï–ó–£–õ–¨–¢–ê–¢–ï	    +
    297				     –°–ò–ú–í–û–õ –ú–ò–ù–£–°–ê.
1   298	00B3  CD 29			     INT      29H	     ;	–í–´–í–ï–°–¢–ò –ú–ò–ù–£–° –ù–ê –≠–ö–†–ê–ù*
1   299	00B5  F7 DB			     NEG      BX		     ; –ò–ó–ú–ï–ù–ò–¢–¨	–°–¢–ê–†–®–ò–ô –ë–ò–¢ –ß–ò–°–õ–ê    +
    300				     ("–£–ë–†–ê–¢–¨ –ú–ò–ù–£–°")
1   301	00B7				M1:				     ; –¢–û–ß–ö–ê –ü–†–ï–•–û–î–ê –ï–°–õ–ò –ß–ò–°–õ–û	    +
    302				     –ü–û–ó–ò–¢–ò–í–ù–û–ï
1   303	00B7  8B C3			     MOV      AX,BX	     ; –û–ë–ù–û–í–ò–¢–¨	–ß–ò–°–õ–û –í –†–ï–ì–ò–°–¢–†–ï 'AX'	    +
    304				     (–ò–ó-–ó–ê	"NEG BX")
1   305	00B9  33 C9			     XOR      CX,CX	     ; –û–ë–ù–£–õ–ò–¢–¨	–†–ï–ì–ò–°–¢–† –°–ß–ï–¢–ß–ò–ö–ê
1   306	00BB  BB 000A			     MOV      BX,10	     ; –î–õ–Ø –†–ê–ó–î–ï–õ–ï–ù–ò–Ø –ß–ò–°–õ–ê –ù–ê –†–ê–ó–†–Ø–î–´
1   307	00BE				M2:				     ; –ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê "–†–ê–ó–ú–ï–©–ï–ù–ò–ï	    +
    308				     –ß–ò–°–õ–ê	–í –°–¢–ï–ö–ï"
1   309	00BE  33 D2			     XOR      DX,DX	     ; –û–ë–ù–£–õ–ï–ù–ò–ï 'DX'
1   310	00C0  F7 F3			     DIV      BX		     ; –î–ï–õ–ï–ù–ò–ï 'AX' –ù–ê	'BX'(–û–¢–î–ï–õ–ï–ù–ò–ï	    +
    311				     –†–ê–ó–†–Ø–î–ê)
1   312	00C2  80 C2 30			     ADD      DL,"0"	     ; DECIMAL TO ASCII
1   313	00C5  52			     PUSH     DX		     ; –†–ê–ó–ú–ï–©–ï–ù–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–ê –í	    +
    314				     –°–¢–ï–ö–ï
1   315	00C6  41			     INC      CX		     ; –£–í–ï–õ–ò–ß–ï–ù–ò–ï –°–ß–ï–¢–ß–ò–ö–ê
1   316	00C7  85 C0			     TEST     AX,AX	     ; *–ï–°–õ–ò –ï–©–ï	–û–°–¢–ê–õ–ò–°–¨ –¶–ò–§–†–´ –í –ß–ò–°–õ–ï
1   317	00C9  75 F3			     JNZ      M2		     ;	–ü–û–í–¢–û–†–ò–¢–¨ "–†–ê–ó–ú–ï–©–ï–ù–ò–ï –í	    +
    318				     –°–¢–ï–ö–ï"
1   319	00CB				M3:				     ; –ù–ê–ß–ê–õ–û –¶–ò–ö–õ–ê –í–´–í–û–î–ê –ß–ò–°–õ–ê –ò–ó +
    320				     –°–¢–ï–ö –ù–ê –≠–ö–†–ê–ù
1   321	00CB  58			     POP      AX		     ; –î–û–°–¢–ê–¢–¨ –í–ï–†–•–ù–Æ–Æ –¶–ò–§–†–£	–ò–ó	    +
    322				     –°–¢–≠–ö–ê
1   323	00CC  CD 29			     INT      29H	     ; –í–´–í–ï–°–¢–ò –ï–Å –ù–ê	–≠–ö–†–ê–ù
1   324	00CE  E2 FB			LOOP	     M3			     ; –ü–û–í–¢–û–†–ò–¢–¨ 'M3' –ü–û–ö–ê	–°–ß–ï–¢–ß–ò–ö –ù–ï +
    325				     '0'
    326
    327	00D0  CB			     RET	     ;–í–û–ó–í–†–ê–©–ê–ï–ú –£–ü–†–ê–í–õ–ï–ù–ò–ï	–í–´–ó–´–í–ê–Æ–©–ï–ô	    +
    328				     –ü–†–û–¶–ï–î–£–†–ï
    329	00D1			      MAIN ENDP
    330				     ;*	–ö–û–ù–ï–¶ –û–°–ù–û–í–ù–û–ô –ü–†–û–¶–ï–î–£–†–´
    331
    332	00D1			     CSEG ENDS	 ; –ö–û–ù–ï–¶ –°–ï–ì–ú–ï–ù–¢–ê –ö–û–î–ê
    333				     END MAIN	     ; –í–´–•–û–î –ò–ó –ü–†–û–ì–†–ê–ú–ú–´
Turbo Assembler	 Version 4.1	    03/02/20 13:58:23	    Page 7
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "03/02/20"
??FILENAME			  Text	 "lab5	  "
??TIME				  Text	 "13:58:23"
??VERSION			  Number 040A
@CPU				  Text	 0101H
@CURSEG				  Text	 CSEG
@FILENAME			  Text	 LAB5
@WORDSIZE			  Text	 2
DUMP				  Byte	 DSEG:0003
ERRCD				  Byte	 DSEG:0009
ERRTXT				  Byte	 DSEG:000A
EXIT				  Near	 CSEG:0071
FL				  Byte	 DSEG:0002
FOR_LOOP			  Near	 CSEG:0049
M1				  Near	 CSEG:00B7
M2				  Near	 CSEG:00BE
M3				  Near	 CSEG:00CB
MAIN				  Far	 CSEG:0000
MSG2TXT				  Byte	 DSEG:0043
MSGTXT				  Byte	 DSEG:0031
NOT_NEG				  Near	 CSEG:0065
NO_ERRORS			  Near	 CSEG:0093
NO_MINUS			  Near	 CSEG:0041
NUM				  Word	 DSEG:0000
SOME_ERR			  Near	 CSEG:006C

Macro Name

ADDITION
INPUT
MAGIC
NEWLINE
OUTPUT
PRINTF

Groups & Segments		  Bit Size Align  Combine Class

CSEG				  16  00D1 Para	  Public  CODE
DSEG				  16  004D Para	  Public  DATA
STACKSEG			  16  0040 Para	  Stack	  STACK
